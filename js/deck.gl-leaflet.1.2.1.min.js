!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("leaflet"),require("@deck.gl/core")):"function"==typeof define&&define.amd?define(["exports","leaflet","@deck.gl/core"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).DeckGlLeaflet={},t.L,t.deck)}(this,(function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var i=o(e);function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?a(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t){return{longitude:t.getCenter().lng,latitude:t.getCenter().lat,zoom:t.getZoom()-1,pitch:0,bearing:0}}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return u(this,n)}}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(f,t);var e,o,s,u=m(f);function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),l(a(e=u.call(this)),"_container",void 0),l(a(e),"_deck",void 0),l(a(e),"_animate",void 0),e.props=t,e}return e=f,(o=[{key:"onAdd",value:function(){return this._container=i.DomUtil.create("div"),this._container.className="leaflet-layer",this._zoomAnimated&&i.DomUtil.addClass(this._container,"leaflet-zoom-animated"),this.getPane().appendChild(this._container),this._deck=function(t,e,o,i){if(!o){var r=_(t);o=new n.Deck(h(h({},i),{},{parent:e,controller:!1,style:{zIndex:"auto"},viewState:r}))}return o}(this._map,this._container,this._deck,this.props),this._update(),this}},{key:"onRemove",value:function(t){return i.DomUtil.remove(this._container),this._container=void 0,this._deck.finalize(),this._deck=void 0,this}},{key:"getEvents",value:function(){var t={viewreset:this._reset,movestart:this._onMoveStart,moveend:this._onMoveEnd,zoomstart:this._onZoomStart,zoom:this._onZoom,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t}},{key:"setProps",value:function(t){Object.assign(this.props,t),this._deck&&this._deck.setProps(t)}},{key:"pickObject",value:function(t){return this._deck&&this._deck.pickObject(t)}},{key:"pickMultipleObjects",value:function(t){return this._deck&&this._deck.pickMultipleObjects(t)}},{key:"pickObjects",value:function(t){return this._deck&&this._deck.pickObjects(t)}},{key:"_update",value:function(){if(!this._map._animatingZoom){var t=this._map.getSize();this._container.style.width="".concat(t.x,"px"),this._container.style.height="".concat(t.y,"px");var e,n,o,r=this._map._getMapPanePos().multiplyBy(-1);i.DomUtil.setPosition(this._container,r),e=this._deck,n=this._map,o=_(n),e.setProps({viewState:o}),e.redraw(!1)}}},{key:"_pauseAnimation",value:function(){this._deck.props._animate&&(this._animate=this._deck.props._animate,this._deck.setProps({_animate:!1}))}},{key:"_unpauseAnimation",value:function(){this._animate&&(this._deck.setProps({_animate:this._animate}),this._animate=void 0)}},{key:"_reset",value:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom()),this._update()}},{key:"_onMoveStart",value:function(){this._pauseAnimation()}},{key:"_onMoveEnd",value:function(){this._update(),this._unpauseAnimation()}},{key:"_onZoomStart",value:function(){this._pauseAnimation()}},{key:"_onAnimZoom",value:function(t){this._updateTransform(t.center,t.zoom)}},{key:"_onZoom",value:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())}},{key:"_onZoomEnd",value:function(){this._unpauseAnimation()}},{key:"_updateTransform",value:function(t,e){var n=this._map.getZoomScale(e,this._map.getZoom()),o=i.DomUtil.getPosition(this._container),r=this._map.getSize().multiplyBy(.5),a=this._map.project(this._map.getCenter(),e),c=this._map.project(t,e).subtract(a),s=r.multiplyBy(-n).add(o).add(r).subtract(c);i.Browser.any3d?i.DomUtil.setTransform(this._container,s,n):i.DomUtil.setPosition(this._container,s)}}])&&r(e.prototype,o),s&&r(e,s),f}(i.Layer);t.LeafletLayer=d,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=deck.gl-leaflet.min.js.map
